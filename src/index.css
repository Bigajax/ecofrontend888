@tailwind base;
@tailwind components;
@tailwind utilities;

/* Evita "font boosting" no iOS/Android e melhora renderização */
html { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; text-rendering: optimizeLegibility; background: #FAF9F7; }

html, body, #root { height: 100%; }

body { background: #FAF9F7; }

.chat-message-text {
  white-space: pre-wrap;
  word-break: break-word;
}

/* Garantir texto branco nas mensagens do usuário */
[data-sender="user"] .chat-message-text {
  color: #ffffff !important;
}

[data-sender="user"] .chat-message-text,
[data-sender="user"] .chat-message-text * {
  color: #ffffff !important;
}

body {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--color-text-primary);
  background-color: var(--color-bg-base);
  background-image: var(--orb-a), var(--orb-b), var(--orb-c);
  background-attachment: fixed;
  font-feature-settings: "kern","liga","clig","calt";
  font-variant-numeric: tabular-nums;
  letter-spacing: .005em;
  font-weight: 300;
  line-height: 1.6;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(180deg, #FAF9F7 0%, #F3EEE7 100%);
  opacity: 0.3;
  mix-blend-mode: overlay;
  z-index: -1;
}

.chat-page {
  scrollbar-gutter: stable both-edges;
}

.no-scrollbar {
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.suggestion-scroll {
  scroll-behavior: smooth;
}

.quick-suggestions-grid {
  scroll-padding-inline: var(--space-fluid-2xs);
}


.container-content {
  width: min(100%, var(--content-max-default));
  margin-inline: auto;
  padding-inline: var(--content-gutter);
}

.container-content-compact {
  width: min(100%, var(--content-max-compact));
  margin-inline: auto;
  padding-inline: var(--content-gutter);
}

.container-content-wide {
  width: min(100%, var(--content-max-wide));
  margin-inline: auto;
  padding-inline: var(--content-gutter-comfortable);
}

.text-fluid-xs { font-size: var(--text-fluid-xs); line-height: 1.4; }
.text-fluid-sm { font-size: var(--text-fluid-sm); line-height: 1.45; }
.text-fluid-base { font-size: var(--text-fluid-base); line-height: 1.55; }
.text-fluid-lg { font-size: var(--text-fluid-lg); line-height: 1.5; }
.text-fluid-xl { font-size: var(--text-fluid-xl); line-height: 1.35; }
.text-fluid-2xl { font-size: var(--text-fluid-2xl); line-height: 1.25; }

.stack-fluid-sm > * + * { margin-top: var(--space-fluid-sm); }
.stack-fluid-md > * + * { margin-top: var(--space-fluid-md); }
.stack-fluid-lg > * + * { margin-top: var(--space-fluid-lg); }


/* Collapsible Message Utilities */
.collapsible-gradient-mask {
  mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
}

.collapsible-fade-bottom {
  position: relative;
}

.collapsible-fade-bottom::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.7) 60%, rgba(255, 255, 255, 1) 100%);
  pointer-events: none;
  border-radius: 0 0 1rem 1rem;
}

@media (max-height: 640px) {
  .quick-suggestions-grid {
    display: flex !important;
    align-items: stretch;
    gap: 0.5rem !important;
    overflow-x: auto;
    padding-inline: 0.25rem;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }

  .quick-suggestions-grid > * {
    flex-shrink: 0;
    min-width: 240px;
    scroll-snap-align: center;
  }
}

/* ---------------------------- Tokens ---------------------------- */
:root {
  color-scheme: light;
  --vh: 1vh;

  /* Tipografia Soft Minimal */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-serif-display: 'Playfair Display', Georgia, 'Times New Roman', serif;

  /* Cores Soft Minimal */
  --eco-bg: #FAF9F7;
  --eco-bubble: #F3EEE7;
  --eco-user: #6EC8FF;
  --eco-text: #38322A;
  --eco-muted: #9C938A;
  --eco-line: #E8E3DD;
  --eco-accent: #C6A995;

  --ink: var(--eco-text);
  --hairline: rgba(232, 227, 221, 0.8);
  --hairline-strong: rgba(232, 227, 221, 1);
  --radius-bubble: 10px;
  --motion-standard: cubic-bezier(0.4, 0, 0.2, 1);

  /* Safe areas */
  --safe-top:    env(safe-area-inset-top, 0px);
  --safe-right:  env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left:   env(safe-area-inset-left, 0px);

  /* Design tokens */
  --color-bg-base: var(--eco-bg);
  --color-bg-surface: rgba(243, 238, 231, 0.6);
  --color-glass-tint: rgba(255, 255, 255, 0.6);
  --color-glass-stroke: rgba(232, 227, 221, 0.8);
  --color-text-primary: var(--eco-text);
  --color-text-muted: var(--eco-muted);
  --color-accent: var(--eco-accent);
  --color-success: #A8C8A0;
  --color-warn: #E0BA8F;
  --color-danger: #D69B98;

  --blur-glass: 12px;
  --blur-glass-strong: 18px;
  --shadow-glass: 0 4px 30px rgba(0, 0, 0, 0.04);
  --shadow-floating: 0 2px 12px rgba(0, 0, 0, 0.03);
  --stroke-glass: 1px solid rgba(232, 227, 221, 0.8);
  --radius-xl: 16px;
  --radius-2xl: 20px;

  /* Orbs suaves pastéis */
  --orb-a: radial-gradient(680px 560px at 16% -12%, rgba(198, 169, 149, 0.04), transparent 58%);
  --orb-b: radial-gradient(540px 420px at 88% -6%, rgba(230, 235, 239, 0.035), transparent 62%);
  --orb-c: radial-gradient(720px 620px at 50% 120%, rgba(243, 238, 231, 0.03), transparent 70%);

  --bubble-eco-bg: var(--eco-bubble);
  --bubble-eco-text: var(--eco-text);
  --bubble-user-bg: var(--eco-user);
  --bubble-user-text: #ffffff;
  --bubble-border: var(--hairline);
  --bubble-user-border: rgba(167, 132, 108, 0.6);
  --bubble-shadow: var(--shadow-glass);
  --bubble-user-shadow: var(--shadow-glass);

  /* Breakpoints oficiais */
  --bp-320: 320px;
  --bp-375: 375px;
  --bp-390: 390px;
  --bp-414: 414px;
  --bp-768: 768px;
  --bp-1024: 1024px;
  --bp-1280: 1280px;
  --bp-1536: 1536px;

  /* Containers */
  --content-max-compact: 42rem;
  --content-max-default: 72rem;
  --content-max-wide: 80rem;
  --content-gutter: clamp(1rem, 2.2vw, 2rem);
  --content-gutter-comfortable: clamp(1.5rem, 3vw, 3rem);

  /* Escala fluida de tipografia */
  --text-fluid-xs: clamp(0.75rem, 0.72rem + 0.15vw, 0.8125rem);
  --text-fluid-sm: clamp(0.8125rem, 0.78rem + 0.2vw, 0.9375rem);
  --text-fluid-base: clamp(0.9375rem, 0.88rem + 0.28vw, 1.0625rem);
  --text-fluid-lg: clamp(1.0625rem, 0.98rem + 0.45vw, 1.25rem);
  --text-fluid-xl: clamp(1.25rem, 1.1rem + 0.8vw, 1.625rem);
  --text-fluid-2xl: clamp(1.5rem, 1.2rem + 1.2vw, 2.125rem);

  /* Escala fluida de spacing */
  --space-fluid-2xs: clamp(0.25rem, 0.2rem + 0.2vw, 0.375rem);
  --space-fluid-xs: clamp(0.5rem, 0.45rem + 0.25vw, 0.625rem);
  --space-fluid-sm: clamp(0.75rem, 0.65rem + 0.4vw, 1rem);
  --space-fluid-md: clamp(1rem, 0.85rem + 0.65vw, 1.375rem);
  --space-fluid-lg: clamp(1.5rem, 1.25rem + 1vw, 2.125rem);
  --space-fluid-xl: clamp(2rem, 1.6rem + 1.6vw, 3rem);

}

/* Alto contraste / menos transparência */
@media (prefers-contrast: more) {
  .glass,
  .glass-strong,
  .glass-surface,
  .glass-toolbar,
  .glass-card,
  .glass-popover,
  .glass-chip,
  .glass-input {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: #ffffff !important;
    border-color: rgba(148, 163, 184, 0.35) !important;
  }

  .message-bubble {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  .message-bubble[data-sender="user"] {
    background: var(--bubble-user-bg) !important;
    color: #ffffff !important;
    border-color: #0056c8 !important;
    box-shadow: none !important;
  }

  .message-bubble[data-sender="eco"],
  .message-bubble:not([data-sender]) {
    background: var(--bubble-eco-bg) !important;
    color: #0f172a !important;
    border-color: rgba(148, 163, 184, 0.28) !important;
    box-shadow: none !important;
  }
}

@media (prefers-reduced-transparency: reduce) {
  body::before {
    opacity: 0 !important;
  }

  .glass,
  .glass-strong,
  .glass-surface,
  .glass-toolbar,
  .glass-card,
  .glass-popover,
  .glass-chip,
  .glass-input {
    background: #ffffff !important;
    border-color: rgba(148, 163, 184, 0.32) !important;
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
  }

  .message-bubble {
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
  }
}

@keyframes feedback-sheet-in {
  from {
    transform: translateY(24px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .animate-[feedback-sheet-in_220ms_ease-out] {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
  }
}

.badge-continuity {
  font-size: 1rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;
  cursor: help;
  opacity: 0.85;
  user-select: none;
  transition: opacity 0.2s ease;
}

.markdown-body {
  font-family: var(--font-sans);
  font-size: 15px;
  line-height: 1.45;
  letter-spacing: -0.01em;
  color: inherit;
}

@media (min-width: 640px) {
  .markdown-body {
    font-size: 16px;
  }
}

.markdown-body > * + * {
  margin-top: 12px;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 1.25rem;
  margin-top: 8px;
}

.markdown-body li {
  margin-top: 6px;
}

.markdown-body strong {
  font-weight: 600;
}

.markdown-body em {
  font-style: italic;
}

.markdown-body a {
  color: inherit;
  text-decoration: underline;
  text-underline-offset: 3px;
  font-weight: 500;
}

.definition-block {
  font-family: var(--font-serif-display);
  font-size: 16px;
  line-height: 1.35;
  letter-spacing: -0.012em;
  font-feature-settings: "kern", "liga", "clig", "dlig";
}

.definition-block > * + * {
  margin-top: 10px;
}

.definition-block h2 {
  font-size: clamp(28px, 8vw, 32px);
  font-weight: 400;
  letter-spacing: -0.02em;
  margin: 0 0 8px;
}

.definition-block h3 {
  font-family: var(--font-sans);
  font-size: 12px;
  letter-spacing: 0.24em;
  text-transform: uppercase;
  font-weight: 500;
  color: rgba(11, 18, 32, 0.56);
  margin: 18px 0 4px;
}

.definition-block p {
  margin-top: 8px;
}

.definition-block ul,
.definition-block ol {
  padding-left: 1.25rem;
  margin-top: 6px;
}

.definition-block li {
  margin-top: 4px;
}

.citation-block {
  font-family: var(--font-serif-display);
  font-size: clamp(18px, 5vw, 20px);
  line-height: 1.45;
  letter-spacing: -0.015em;
  font-feature-settings: "kern", "liga", "clig", "dlig";
}

.citation-block > * + * {
  margin-top: 10px;
}

.citation-block blockquote {
  margin: 0;
  padding-left: 18px;
  border-left: 1px solid var(--hairline-strong);
}

.citation-block p {
  margin-top: 8px;
}

.citation-block p:first-of-type {
  margin-top: 0;
}

.badge-continuity:hover,
.badge-continuity:focus-visible {
  opacity: 1;
}

/* ------------------------- Altura raiz ------------------------- */
html, body, #root { height: 100%; min-height: 0; }
@supports (height: 100svh) { html, body, #root { height: 100svh; } }
@supports (height: 100dvh) { html, body, #root { height: 100dvh; } }
@supports not (height: 100dvh) {
  .h-dvh { height: 100vh; }
}

body {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.fit-viewport { height: 100svh; }
@supports (height: 100dvh) { .fit-viewport { height: 100dvh; } }
.safe-pads { padding: var(--safe-top) var(--safe-right) var(--safe-bottom) var(--safe-left); }

/* --------------------------- Layout ---------------------------- */
.app-shell {
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: row;
}

.chat-page {
  flex: 1 1 auto;
  min-width: 0;
  height: 100%;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow-anchor: none;
  scrollbar-gutter: stable both-edges;
  touch-action: pan-y;
}
.anchor-end { overflow-anchor: auto; }

.messages {
  scrollbar-gutter: stable;
}

.composer {
  position: sticky;
  bottom: env(safe-area-inset-bottom, 0);
  padding-bottom: calc(env(safe-area-inset-bottom, 0));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}


.supports-backdrop .bg-white\/80 { transform: translateZ(0); }

/* ---------------------- Glass utilities ----------------------- */

.glass,
.glass-surface,
.glass-toolbar,
.glass-card,
.glass-popover,
.glass-chip {
  position: relative;
  background: var(--color-bg-surface);
  backdrop-filter: blur(var(--blur-glass));
  -webkit-backdrop-filter: blur(var(--blur-glass));
  border: var(--stroke-glass);
  box-shadow: none;
}

.glass::before,
.glass-surface::before,
.glass-toolbar::before,
.glass-card::before,
.glass-popover::before,
.glass-chip::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0));
  opacity: 0.75;
  pointer-events: none;
}

.glass-toolbar,
.glass-input,
.glass-popover {
  border-radius: 24px;
}

.glass-card {
  border-radius: 28px;
}

.glass-chip {
  border-radius: 9999px;
}

.glass-popover {
  padding: 0.75rem;
}

.glass-strong {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(var(--blur-glass-strong));
  -webkit-backdrop-filter: blur(var(--blur-glass-strong));
  border: var(--stroke-glass);
  box-shadow: none;
}

.skeleton-glass {
  position: relative;
  overflow: hidden;
  border-radius: 24px;
  background: rgba(255, 255, 255, 0.55);
  border: var(--stroke-glass);
  backdrop-filter: blur(calc(var(--blur-glass) - 4px));
  -webkit-backdrop-filter: blur(calc(var(--blur-glass) - 4px));
  box-shadow: none;
}

.skeleton-glass::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
  transform: translateX(-100%);
  animation: skeleton-sheen 1.8s ease-in-out infinite;
}

.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 48px;
  padding: 0 1.5rem;
  border-radius: 10px;
  font-weight: 400;
  background: var(--eco-user);
  color: #ffffff;
  border: none;
  box-shadow: var(--shadow-glass);
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background: linear-gradient(90deg, #A7846C, #C6A995);
  transform: translateY(-2px);
  box-shadow: var(--shadow-floating);
}

.btn-primary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.3);
}

.btn-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 46px;
  padding: 0 1.5rem;
  border-radius: 10px;
  font-weight: 400;
  background: transparent;
  color: var(--eco-user);
  border: 1px solid var(--eco-line);
  box-shadow: none;
  backdrop-filter: blur(calc(var(--blur-glass) - 4px));
  -webkit-backdrop-filter: blur(calc(var(--blur-glass) - 4px));
  transition: all 0.3s ease;
}

.btn-secondary:hover {
  background: rgba(167, 132, 108, 0.08);
  border-color: var(--eco-accent);
  transform: translateY(-1px);
}

.btn-secondary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.2);
}

.glass-input,
.glass-textarea,
.glass-select {
  background: rgba(255, 255, 255, 0.6);
  border: var(--stroke-glass);
  border-radius: 12px;
  box-shadow: var(--shadow-floating);
  color: var(--color-text-primary);
  padding: 0.85rem 1rem;
  font-weight: 300;
  transition: all 0.3s ease;
}

.glass-input:focus,
.glass-textarea:focus,
.glass-select:focus {
  outline: none;
  border-color: var(--eco-accent);
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.15);
}

.glass-input::placeholder,
.glass-textarea::placeholder,
.glass-select::placeholder {
  font-size: 0.95rem;
  font-weight: 300;
  letter-spacing: .01em;
  color: var(--eco-muted);
}


@supports not ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))) {
  .glass,
  .glass-strong,
  .glass-surface,
  .glass-toolbar,
  .glass-card,
  .glass-popover,
  .glass-chip,
  .glass-input,
  .btn-apple,
  .btn-secondary {
    background: #ffffff !important;
    border-color: rgba(148, 163, 184, 0.28) !important;
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
  }

  .message-bubble {
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
  }

  .message-bubble[data-sender="user"] {
    background: var(--color-accent) !important;
    color: #ffffff !important;
    border-color: rgba(0, 122, 255, 0.6) !important;
  }

  .message-bubble[data-sender="eco"],
  .message-bubble:not([data-sender]) {
    background: #ffffff !important;
    color: var(--color-text-primary) !important;
    border-color: rgba(148, 163, 184, 0.28) !important;
  }
}

/* ------------------------ Tipografia -------------------------- */
h1, h2, h3, h4, h5, h6 {
  font-family: 'Playfair Display', serif;
  font-weight: 500;
  line-height: 1.2;
}

/* Usa var(--vh) p/ corrigir o 100vh no iOS */
.App {
  width: 100%;
  height: calc(var(--vh, 1vh) * 100);
  display: flex; align-items: center; justify-content: center;
}
@supports (height: 100dvh) { .App { height: 100dvh; } }

/* Inputs */
input, textarea { font-size: 16px; }
* { -webkit-tap-highlight-color: transparent; }
button, [role="button"], a { touch-action: manipulation; }

/* Foco visível acessível */
:where(button,[role="button"],a,input,textarea,select):focus-visible {
  outline: 2px solid rgba(59,130,246,.55);
  outline-offset: 2px;
}

/* Fonte consistente nas bolhas */
.message-bubble, .message-bubble * {
  font-family: 'SF Pro Text', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
}

/* ------------------------ Animações --------------------------- */
@keyframes floating-animation { 0%{transform:translateY(0)} 50%{transform:translateY(-3px)} 100%{transform:translateY(0)} }
@keyframes pulse-dot { 0%,100%{opacity:.2} 50%{opacity:1} }
@keyframes gentlePulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.03);opacity:.95} }
@keyframes typingWave { 0%{transform:translateY(0);opacity:.4} 25%{transform:translateY(-4px);opacity:1} 50%{transform:translateY(0);opacity:.4} 100%{transform:translateY(0);opacity:.4} }
@keyframes ecoDot { 0%,60%,100%{transform:translateY(0);opacity:.8} 30%{transform:translateY(-2px);opacity:1} }
@keyframes skeleton-sheen { 0%{transform:translateX(-100%);} 50%{transform:translateX(0);} 100%{transform:translateX(100%);} }

/* Animações Soft Minimal */
@keyframes ecoPulse {
  0%, 100% { transform: scale(1); opacity: 0.9; }
  50% { transform: scale(1.04); opacity: 1; }
}

@keyframes wave {
  0% { transform: scale(1); opacity: 0.9; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 0.9; }
}

@keyframes breathe {
  0%, 100% { transform: scale(1); opacity: 0.95; }
  50% { transform: scale(1.02); opacity: 1; }
}

@keyframes fadeExpand {
  0% { transform: scale(0.95); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

/* Scroll Animation Keyframes */
@keyframes fadeInAnimation {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUpFadeAnimation {
  from { opacity: 0; transform: translateY(50px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes slideLeftFadeAnimation {
  from { opacity: 0; transform: translateX(-50px) scale(0.95); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}

@keyframes slideRightFadeAnimation {
  from { opacity: 0; transform: translateX(50px) scale(0.95); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}

.animate-gentle-pulse { animation: gentlePulse 3s ease-in-out infinite; }
.floating { animation: floating-animation 8s ease-in-out infinite; }
.vibrating { animation: vibrating-animation .6s ease-in-out infinite; }
.animate-eco-pulse { animation: ecoPulse 6s ease-in-out infinite; }
.animate-breathe { animation: breathe 4s ease-in-out infinite; }
.animate-fade-expand { animation: fadeExpand 300ms ease-out; }

/* ---------------- Indicador de digitação ---------------------- */
.typing-indicator{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:4px;
  width: fit-content;
  min-width: 0;
  min-height: 18px;
}
.typing-dots{ display:inline-flex; gap:4px; }
.typing-dots > span{
  width:5px; height:5px; border-radius:9999px;
  background:#6b7280; opacity:.85;
  animation: typingWave 1s ease-in-out infinite;
}
.typing-dots > span:nth-child(2){ animation-delay:.15s; }
.typing-dots > span:nth-child(3){ animation-delay:.30s; }

.bubble-typing{ padding:6px 10px !important; border-radius:14px !important; }



/* ----------------------- Scrollbar ---------------------------- */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.12); border-radius: 10px; }
* { scrollbar-width: thin; scrollbar-color: rgba(0,0,0,.24) transparent; }

/* Scrollbar suave para modal */
.modal-scroll {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

.modal-scroll::-webkit-scrollbar {
  width: 8px;
}

.modal-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.modal-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(0, 0, 0, 0.15);
  border-radius: 10px;
  transition: background-color 0.2s;
}

.modal-scroll::-webkit-scrollbar-thumb:hover {
  background-color: rgba(0, 0, 0, 0.25);
}

/* -------------------- Textos com gradiente -------------------- */
.text-gradient-blue,
.text-gradient-rose {
  display: inline-block;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  -webkit-text-fill-color: transparent;
}

.text-gradient-blue {
  background-image: linear-gradient(90deg, rgba(15, 23, 42, 0.85), rgba(0, 122, 255, 0.55));
}

.text-gradient-rose {
  background-image: linear-gradient(90deg, rgba(15, 23, 42, 0.85), rgba(168, 85, 247, 0.5));
}

/* ---- Alturas e teclado (iOS/Android) ---- */
/* Previne bounce quando teclado está aberto */
body.keyboard-open {
  overscroll-behavior-y: contain;
  padding-bottom: var(--safe-bottom);
  /* Previne scroll do body quando teclado abre */
  position: fixed;
  width: 100%;
  overflow: hidden;
}

/* Mobile: garantir que o input fique visível */
@media (max-width: 768px) {
  /* Smooth scroll para mobile */
  html {
    scroll-behavior: smooth;
  }

  /* Otimizar scroll touch no iOS */
  body, #root {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
  }

  /* Quando teclado abre, garantir que o scroll funciona */
  body.keyboard-open #root {
    position: relative;
    overflow-y: auto;
    height: 100dvh; /* Dynamic viewport height - ajusta com teclado */
  }

  /* Input fixo quando teclado aberto */
  body.keyboard-open footer {
    position: fixed !important;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
  }
}

/* iOS Safari: corrigir viewport height com teclado */
@supports (-webkit-touch-callout: none) {
  body.keyboard-open {
    height: 100dvh;
    max-height: -webkit-fill-available;
  }
}

/* Diário Estoico - Fundo branco */
body.diario-estoico-page,
body.diario-estoico-page html {
  background: #ffffff !important;
}

/* ---------- Redução de movimento ---------- */
@media (prefers-reduced-motion: reduce) {
  html * { transition: none !important; }
  .reduce-motion * { animation: none !important; }
}

/* ----------------- RESPONSIVIDADE DA SIDEBAR ----------------- */
@media (max-width: 767px) { :root { --eco-sidebar-w: 0px !important; } }

/* Foco genérico (fallback) */
:focus-visible {
  outline: 2px solid rgba(0, 122, 255, 0.5);
  outline-offset: 2px;
}

/* Seleção de texto */
::selection { background: rgba(0, 122, 255, 0.2); color: #0f172a; }

.eco-wordmark {
  letter-spacing: .08em;
}

.input-glass {
  background: rgba(255, 255, 255, 0.6);
  border: var(--stroke-glass);
  border-radius: 12px;
  box-shadow: var(--shadow-floating);
  color: var(--color-text-primary);
  height: 48px;
  padding: 0 1rem;
  font-weight: 300;
  transition: all 0.3s ease;
}

.input-glass:focus {
  outline: none;
  border-color: var(--eco-accent);
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.15);
}

.btn-apple {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 48px;
  border-radius: 10px;
  padding: 0 1.5rem;
  font-weight: 400;
  background: rgba(255, 255, 255, 0.6);
  color: var(--color-text-primary);
  border: 1px solid var(--eco-line);
  box-shadow: var(--shadow-floating);
  transition: all 0.3s ease;
}

.btn-apple:hover {
  transform: translateY(-2px);
  background: rgba(255, 255, 255, 0.8);
  box-shadow: var(--shadow-glass);
}

.btn-apple:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.2);
}

.btn-apple[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.btn-apple-primary {
  background: var(--eco-user);
  color: #ffffff;
  border: none;
  box-shadow: var(--shadow-glass);
}

.btn-apple-primary:hover {
  background: linear-gradient(90deg, #A7846C, #C6A995);
  transform: translateY(-2px);
}

.btn-apple-primary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(198, 169, 149, 0.3);
}

.divider-soft { display:flex; align-items:center; gap:12px; padding-top:2px; }
.divider-soft > span { flex:1; height:1px; background: var(--eco-line); }

/* Pills “ambient” */
.pill-ambient {
  display:inline-flex; align-items:center; gap:10px;
  padding: 8px 14px;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.6);
  border: var(--stroke-glass);
  box-shadow: none;
}
.pill-ambient .mini-dot { width:8px; height:8px; border-radius:9999px; background:var(--color-accent); }
.pill-ambient .mini-bubble {
  width:24px; height:24px; border-radius:9999px;
  background: radial-gradient(38% 32% at 38% 32%, #fff 0%, #dfeffc 45%, #c6bfff 100%);
  border:1px solid rgba(255,255,255,.9);
  box-shadow: none;
}

/* Espaçamentos verticais */
.stack-quiet > * + * { margin-top: .75rem; }
.stack-roomy > * + * { margin-top: 1rem; }

/* Otimização mobile: reduzir blur alto */
@media (max-width: 480px) {
  .glass { backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
  .glass-strong { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); }
  .message-bubble {
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
  }
}

/* Em telas com pointer “coarse” (toque), suavize blur */
@media (pointer: coarse) and (hover: none) {
  .glass, .glass-strong {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
}

/* Acessibilidade extra */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0 0 0 0); white-space: nowrap; border: 0;
}

/* Custom Range Input Styles for Volume Control */
input[type='range'] {
  -webkit-appearance: none;
  appearance: none;
}

input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3B82F6;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  position: relative;
  z-index: 20;
}

input[type='range']::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #3B82F6;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  position: relative;
  z-index: 20;
}

input[type='range']::-webkit-slider-runnable-track {
  height: 0;
  background: transparent;
}

input[type='range']::-moz-range-track {
  height: 0;
  background: transparent;
}

